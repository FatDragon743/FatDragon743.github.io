(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d1564dc"],{"3fff":function(e,t,a){},"809a":function(e,t,a){"use strict";var s=a("3fff"),i=a.n(s);i.a},abec:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.filters.email,callback:function(t){e.$set(e.filters,"email",t)},expression:"filters.email"}},[a("template",{slot:"prepend"},[e._v("邮箱")])],2),a("el-input",{attrs:{placeholder:"手机号"},model:{value:e.filters.phone,callback:function(t){e.$set(e.filters,"phone",t)},expression:"filters.phone"}},[a("template",{slot:"prepend"},[e._v("手机号")])],2),a("el-input",{attrs:{placeholder:"状态"},model:{value:e.filters.status,callback:function(t){e.$set(e.filters,"status",t)},expression:"filters.status"}},[a("template",{slot:"prepend"},[e._v("状态")])],2)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getCDKs}},[e._v("检索")])],1),a("el-form-item",{staticClass:"right"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("生成激活码")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.CDKs,"highlight-current-row":"",stripe:""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60",sortable:""}}),a("el-table-column",{attrs:{prop:"phone",label:"手机号",sortable:""}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",sortable:""}}),a("el-table-column",{attrs:{prop:"grant_time",label:"授权时间",width:"150",sortable:""}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"150",sortable:"",formatter:e.formatStatus}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.pageLimit,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"140px",rules:e.addFormRules,"label-position":"left"}},[a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.phone,callback:function(t){e.$set(e.addForm,"phone",t)},expression:"addForm.phone"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),a("el-form-item",{attrs:{label:"授权时间段（天数）"}},[a("el-slider",{attrs:{"show-input":"",marks:e.marks,min:0,max:365},model:{value:e.addForm.grant_time,callback:function(t){e.$set(e.addForm,"grant_time",t)},expression:"addForm.grant_time"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)},i=[],l=(a("0857"),a("cb1d")),r=a("8b55"),o=a("4ec3"),n={data:function(){var e;return{ifReDo:!0,marks:{0:"0天",90:"90天",180:"180天",270:"270天",350:"1年"},pageLimit:1,filters:{email:"",phone:"",status:""},CDKs:[],total:0,page:1,listLoading:!1,sels:[],editFormVisible:!1,editLoading:!1,editFormRules:(e={phone:[{required:!0,message:"请输入姓名",trigger:"blur"}]},Object(l["a"])(e,"phone",[{required:!0,message:"请输入姓名",trigger:"blur"}]),Object(l["a"])(e,"phone",[{required:!0,message:"请输入姓名",trigger:"blur"}]),e),addFormVisible:!1,addLoading:!1,addFormRules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],grant_time:[{required:!0,message:"请输入授权时间段",trigger:"blur"}]},addForm:{phone:"",email:"",grant_time:90}}},methods:{formatStatus:function(e,t){switch(e.status){case 0:return"未使用";case 1:return"已使用";case 2:return"已失效"}},handleCurrentChange:function(e){this.page=e,this.getCDKs()},getCDKs:function(){var e=this,t={page:this.page,pageLimit:this.pageLimit};this.filters.email&&(t["email"]=this.filters.email),this.filters.phone&&(t["phone"]=this.filters.phone),this.filters.status&&(t["status"]=this.filters.status),console.log(t),this.listLoading=!0,Object(o["f"])(t).then(function(t){t.code;var a=t.msg;200==t.code?(e.total=a.total,console.log("total",e.total),e.CDKs=r["a"].getList(a),e.ifReDo=!0):e.ifReDo&&(e.$message({message:a,type:"error"}),e.filters={email:"",phone:"",status:""},e.getCDKs(),e.ifReDo=!1),e.listLoading=!1})},handleDel:function(e,t){var a=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){a.listLoading=!0;var e={id:t.id};Object(o["c"])(e).then(function(e){a.listLoading=!1;e.code;var t=e.msg;200==e.code?(a.$message({message:"删除成功",type:"success"}),a.getCDKs()):a.$message({message:t,type:"error"})})}).catch(function(){})},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm=Object.assign({},t)},handleAdd:function(){this.addFormVisible=!0,this.addForm={phone:"18158504557",email:"961373747@qq.com",grant_time:90}},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t=Object.assign({},e.addForm);Object(o["e"])(t).then(function(t){e.addLoading=!1;var a=t.code,s=t.msg;200==a?(e.$message({message:"提交成功",type:"success"}),e.$refs["addForm"].resetFields(),e.addFormVisible=!1,e.getCDKs()):(e.$message({message:s,type:"error"}),e.$refs["addForm"].resetFields(),e.addFormVisible=!1,e.getCDKs())})})})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=this.sels.map(function(e){return e.id}).toString();this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0;var a={ids:t};batchRemoveUser(a).then(function(t){e.listLoading=!1,e.$message({message:"删除成功",type:"success"}),e.getCDKs()})}).catch(function(){})}},mounted:function(){this.getCDKs()}},d=n,c=(a("809a"),a("17cc")),m=Object(c["a"])(d,s,i,!1,null,"6ed43bfe",null);t["default"]=m.exports},cb1d:function(e,t,a){"use strict";function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",function(){return s})}}]);