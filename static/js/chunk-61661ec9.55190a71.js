(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61661ec9"],{"09f4":function(t,e,a){"use strict";var l=a("8b09"),i=a.n(l);i.a},"8b09":function(t,e,a){},c928:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"日志标识",clearable:""},model:{value:t.filters.log_id,callback:function(e){t.$set(t.filters,"log_id",e)},expression:"filters.log_id"}},[a("template",{slot:"prepend"},[t._v("日志标识")])],2)],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"date",placeholder:"根据开始日期刷选",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.filters.date_start,callback:function(e){t.$set(t.filters,"date_start",e)},expression:"filters.date_start"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"date",placeholder:"根据结束日期刷选",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.filters.date_end,callback:function(e){t.$set(t.filters,"date_end",e)},expression:"filters.date_end"}})],1),a("el-form-item",{staticClass:"right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.getDebugLogs}},[t._v("查询")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.logs,"highlight-current-row":""},on:{"selection-change":t.selsChange}},[a("el-table-column",{attrs:{prop:"log_id",label:"日志标识",width:"150",sortable:""}}),a("el-table-column",{attrs:{prop:"station",label:"测试站别",width:"100",sortable:""}}),a("el-table-column",{attrs:{prop:"result",label:"测试结果",width:"100",sortable:""}}),a("el-table-column",{attrs:{prop:"error_code",label:"错误代码",sortable:""}}),a("el-table-column",{attrs:{prop:"start_time",label:"测试开始时间","min-width":"100",sortable:"",formatter:t.formatDate}}),a("el-table-column",{attrs:{prop:"end_time",label:"测试结束时间","min-width":"100",sortable:"",formatter:t.formatDate}}),a("el-table-column",{attrs:{prop:"add_time",label:"日志写入时间","min-width":"100",sortable:""}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.handleDetail(e.$index,e.row)}}},[t._v("详情")])]}}])})],1),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":t.pageLimit,total:t.total},on:{"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"日志详情",visible:t.detailFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.detailFormVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.detailForm,"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"test_item",label:"测试项目"}}),a("el-table-column",{attrs:{prop:"test_log",label:"测试结果"}})],1)],1)],1)},i=[],s=(a("34a3"),a("8b55")),r=a("4ec3"),o={data:function(){return{ifReDo:!0,listLoading:!1,total:0,page:1,pageLimit:8,user_id:0,logs:[],filters:{log_id:"",date_start:"",date_end:""},detailForm:[],detailFormVisible:!1}},methods:{handleDetail:function(t,e){var a=this,l={user_id:this.user_id,mode:1,id:e.id};Object(r["h"])(l).then(function(t){var e=t.code,l=t.msg;200==e?(a.detailForm=[],a.detailForm.push(l),a.detailFormVisible=!0,console.log("detailForm : ",t)):a.$message({message:l||"没有项目，请重新查询！",type:"error"})})},formatDate:function(t,e,a,l){var i=new Date(1*a);return i.toLocaleDateString().replace(/\//g,"-")+" "+i.toTimeString().substr(0,8)},handleCurrentChange:function(t){this.page=t,this.getDebugLogs()},selsChange:function(t){this.sels=t},getDebugLogs:function(){var t=this,e={page:this.page,pageLimit:this.pageLimit,user_id:this.user_id};for(var a in this.filters)this.filters[a]&&(e[a]=this.filters[a]);console.log(e),this.listLoading=!0,Object(r["g"])(e).then(function(e){var a=e.code,l=e.msg;200==a?(t.total=l.total,t.logs=s["a"].getList(l),t.ifReDo=!0):t.ifReDo&&(t.$message({message:l||"没有项目，请重新查询！",type:"error"}),t.filters={sn:"",order_num:"",made_in:"",date_start:"",date_end:""},t.getDebugLogs(),t.ifReDo=!1),t.listLoading=!1})}},mounted:function(){this.user_id=parseInt(sessionStorage.getItem("user_id")),this.getDebugLogs()}},n=o,d=(a("09f4"),a("17cc")),c=Object(d["a"])(n,l,i,!1,null,"24d2ed30",null);e["default"]=c.exports}}]);